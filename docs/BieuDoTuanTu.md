# BIỂU ĐỒ TUẦN TỰ - SAKURA FLASHCARD

## 2.6.1 Biểu đồ tuần tự chức năng Đăng nhập

```
┌───────────┐     ┌─────────────┐     ┌─────────────┐     ┌──────────────┐     ┌──────────────┐
│ Người dùng│     │ LoginScreen │     │LoginViewModel│     │  AuthAPI     │     │   MongoDB    │
└─────┬─────┘     └──────┬──────┘     └──────┬───────┘     └──────┬───────┘     └──────┬───────┘
      │                  │                   │                    │                    │
      │  Nhập email,     │                   │                    │                    │
      │  password        │                   │                    │                    │
      │─────────────────►│                   │                    │                    │
      │                  │                   │                    │                    │
      │                  │  login(email,pwd) │                    │                    │
      │                  │──────────────────►│                    │                    │
      │                  │                   │                    │                    │
      │                  │                   │ POST /auth/login   │                    │
      │                  │                   │───────────────────►│                    │
      │                  │                   │                    │                    │
      │                  │                   │                    │ findOne(email)     │
      │                  │                   │                    │───────────────────►│
      │                  │                   │                    │                    │
      │                  │                   │                    │    user data       │
      │                  │                   │                    │◄───────────────────│
      │                  │                   │                    │                    │
      │                  │                   │                    │ comparePassword()  │
      │                  │                   │                    │────────┐           │
      │                  │                   │                    │        │           │
      │                  │                   │                    │◄───────┘           │
      │                  │                   │                    │                    │
      │                  │                   │                    │ generateTokens()   │
      │                  │                   │                    │────────┐           │
      │                  │                   │                    │        │           │
      │                  │                   │                    │◄───────┘           │
      │                  │                   │                    │                    │
      │                  │                   │  access + refresh  │                    │
      │                  │                   │       token        │                    │
      │                  │                   │◄───────────────────│                    │
      │                  │                   │                    │                    │
      │                  │   saveTokens()    │                    │                    │
      │                  │◄──────────────────│                    │                    │
      │                  │                   │                    │                    │
      │  Chuyển màn hình │                   │                    │                    │
      │  HomeScreen      │                   │                    │                    │
      │◄─────────────────│                   │                    │                    │
      │                  │                   │                    │                    │
```

---

## 2.6.2 Biểu đồ tuần tự chức năng Đăng ký

```
┌───────────┐     ┌───────────────┐     ┌────────────────┐     ┌──────────────┐     ┌──────────────┐
│ Người dùng│     │RegisterScreen │     │RegisterViewModel│    │  AuthAPI     │     │ EmailService │
└─────┬─────┘     └───────┬───────┘     └───────┬────────┘     └──────┬───────┘     └──────┬───────┘
      │                   │                     │                     │                    │
      │  Nhập thông tin   │                     │                     │                    │
      │  đăng ký          │                     │                     │                    │
      │──────────────────►│                     │                     │                    │
      │                   │                     │                     │                    │
      │                   │  register(data)     │                     │                    │
      │                   │────────────────────►│                     │                    │
      │                   │                     │                     │                    │
      │                   │                     │ validate input      │                    │
      │                   │                     │─────────┐           │                    │
      │                   │                     │         │           │                    │
      │                   │                     │◄────────┘           │                    │
      │                   │                     │                     │                    │
      │                   │                     │ POST /auth/register │                    │
      │                   │                     │────────────────────►│                    │
      │                   │                     │                     │                    │
      │                   │                     │                     │ hashPassword()     │
      │                   │                     │                     │─────────┐          │
      │                   │                     │                     │         │          │
      │                   │                     │                     │◄────────┘          │
      │                   │                     │                     │                    │
      │                   │                     │                     │ generateOTP()      │
      │                   │                     │                     │─────────┐          │
      │                   │                     │                     │         │          │
      │                   │                     │                     │◄────────┘          │
      │                   │                     │                     │                    │
      │                   │                     │                     │   sendOTP(email)   │
      │                   │                     │                     │───────────────────►│
      │                   │                     │                     │                    │
      │                   │                     │                     │     success        │
      │                   │                     │                     │◄───────────────────│
      │                   │                     │                     │                    │
      │                   │                     │   201 Created       │                    │
      │                   │                     │◄────────────────────│                    │
      │                   │                     │                     │                    │
      │                   │  Hiện OTP Screen    │                     │                    │
      │                   │◄────────────────────│                     │                    │
      │                   │                     │                     │                    │
      │  Nhập OTP         │                     │                     │                    │
      │──────────────────►│                     │                     │                    │
      │                   │                     │                     │                    │
      │                   │  verifyOTP(code)    │                     │                    │
      │                   │────────────────────►│                     │                    │
      │                   │                     │                     │                    │
      │                   │                     │ POST /verify-otp    │                    │
      │                   │                     │────────────────────►│                    │
      │                   │                     │                     │                    │
      │                   │                     │   200 Verified      │                    │
      │                   │                     │◄────────────────────│                    │
      │                   │                     │                     │                    │
      │  Đăng ký thành    │                     │                     │                    │
      │  công             │                     │                     │                    │
      │◄──────────────────│                     │                     │                    │
      │                   │                     │                     │                    │
```

---

## 2.6.3 Biểu đồ tuần tự chức năng Học bảng chữ cái

```
┌───────────┐     ┌─────────────────┐     ┌──────────────────┐     ┌──────────────────┐
│ Người dùng│     │AlphabetScreen   │     │AlphabetViewModel │     │ Local Database   │
└─────┬─────┘     └────────┬────────┘     └────────┬─────────┘     └────────┬─────────┘
      │                    │                       │                        │
      │  Chọn loại         │                       │                        │
      │  (Hiragana/        │                       │                        │
      │   Katakana)        │                       │                        │
      │───────────────────►│                       │                        │
      │                    │                       │                        │
      │                    │ loadAlphabet(type)    │                        │
      │                    │──────────────────────►│                        │
      │                    │                       │                        │
      │                    │                       │ getCharacters(type)    │
      │                    │                       │───────────────────────►│
      │                    │                       │                        │
      │                    │                       │    character list      │
      │                    │                       │◄───────────────────────│
      │                    │                       │                        │
      │                    │    characterList      │                        │
      │                    │◄──────────────────────│                        │
      │                    │                       │                        │
      │  Hiển thị bảng     │                       │                        │
      │  chữ cái           │                       │                        │
      │◄───────────────────│                       │                        │
      │                    │                       │                        │
      │  Chọn ký tự        │                       │                        │
      │───────────────────►│                       │                        │
      │                    │                       │                        │
      │                    │ selectCharacter(char) │                        │
      │                    │──────────────────────►│                        │
      │                    │                       │                        │
      │                    │   character detail    │                        │
      │                    │◄──────────────────────│                        │
      │                    │                       │                        │
      │  Hiển thị chi tiết │                       │                        │
      │  (Romaji, stroke)  │                       │                        │
      │◄───────────────────│                       │                        │
      │                    │                       │                        │
```

---

## 2.6.4 Biểu đồ tuần tự chức năng Học từ vựng

```
┌───────────┐     ┌─────────────────┐     ┌────────────────┐     ┌──────────────┐     ┌──────────────┐
│ Người dùng│     │FlashcardScreen  │     │LearnViewModel  │     │VocabularyAPI │     │   MongoDB    │
└─────┬─────┘     └────────┬────────┘     └───────┬────────┘     └──────┬───────┘     └──────┬───────┘
      │                    │                      │                     │                    │
      │  Chọn level +      │                      │                     │                    │
      │  topic             │                      │                     │                    │
      │───────────────────►│                      │                     │                    │
      │                    │                      │                     │                    │
      │                    │ loadVocabs(level,    │                     │                    │
      │                    │            topic)    │                     │                    │
      │                    │─────────────────────►│                     │                    │
      │                    │                      │                     │                    │
      │                    │                      │ GET /vocabularies   │                    │
      │                    │                      │    ?level&topic     │                    │
      │                    │                      │────────────────────►│                    │
      │                    │                      │                     │                    │
      │                    │                      │                     │ find(query)        │
      │                    │                      │                     │───────────────────►│
      │                    │                      │                     │                    │
      │                    │                      │                     │   vocab list       │
      │                    │                      │                     │◄───────────────────│
      │                    │                      │                     │                    │
      │                    │                      │   vocabulary list   │                    │
      │                    │                      │◄────────────────────│                    │
      │                    │                      │                     │                    │
      │                    │   vocabList          │                     │                    │
      │                    │◄─────────────────────│                     │                    │
      │                    │                      │                     │                    │
      │  Hiển thị          │                      │                     │                    │
      │  flashcard         │                      │                     │                    │
      │◄───────────────────│                      │                     │                    │
      │                    │                      │                     │                    │
      │  Tap để lật thẻ    │                      │                     │                    │
      │───────────────────►│                      │                     │                    │
      │                    │                      │                     │                    │
      │                    │ flipCard()           │                     │                    │
      │                    │─────────────────────►│                     │                    │
      │                    │                      │                     │                    │
      │  Hiện nghĩa +      │                      │                     │                    │
      │  ví dụ             │                      │                     │                    │
      │◄───────────────────│                      │                     │                    │
      │                    │                      │                     │                    │
      │  Swipe tiếp        │                      │                     │                    │
      │───────────────────►│                      │                     │                    │
      │                    │                      │                     │                    │
      │                    │ nextCard()           │                     │                    │
      │                    │─────────────────────►│                     │                    │
      │                    │                      │                     │                    │
      │  Hiển thị thẻ      │                      │                     │                    │
      │  tiếp theo         │                      │                     │                    │
      │◄───────────────────│                      │                     │                    │
      │                    │                      │                     │                    │
```

---

## 2.6.5 Biểu đồ tuần tự chức năng Làm bài Quiz

```
┌───────────┐     ┌─────────────┐     ┌─────────────┐     ┌──────────────┐     ┌──────────────┐
│ Người dùng│     │ QuizScreen  │     │QuizViewModel│     │   QuizAPI    │     │   MongoDB    │
└─────┬─────┘     └──────┬──────┘     └──────┬──────┘     └──────┬───────┘     └──────┬───────┘
      │                  │                   │                    │                    │
      │  Chọn quiz       │                   │                    │                    │
      │  (level, topic)  │                   │                    │                    │
      │─────────────────►│                   │                    │                    │
      │                  │                   │                    │                    │
      │                  │ loadQuiz(id)      │                    │                    │
      │                  │──────────────────►│                    │                    │
      │                  │                   │                    │                    │
      │                  │                   │ GET /quizzes/:id   │                    │
      │                  │                   │───────────────────►│                    │
      │                  │                   │                    │                    │
      │                  │                   │                    │ findById(id)       │
      │                  │                   │                    │───────────────────►│
      │                  │                   │                    │                    │
      │                  │                   │                    │    quiz data       │
      │                  │                   │                    │◄───────────────────│
      │                  │                   │                    │                    │
      │                  │                   │   quiz questions   │                    │
      │                  │                   │◄───────────────────│                    │
      │                  │                   │                    │                    │
      │                  │   questionList    │                    │                    │
      │                  │◄──────────────────│                    │                    │
      │                  │                   │                    │                    │
      │  Hiển thị câu    │                   │                    │                    │
      │  hỏi             │                   │                    │                    │
      │◄─────────────────│                   │                    │                    │
      │                  │                   │                    │                    │
      │  Chọn đáp án     │                   │                    │                    │
      │─────────────────►│                   │                    │                    │
      │                  │                   │                    │                    │
      │                  │ selectAnswer(ans) │                    │                    │
      │                  │──────────────────►│                    │                    │
      │                  │                   │                    │                    │
      │                  │   next question   │                    │                    │
      │                  │◄──────────────────│                    │                    │
      │                  │                   │                    │                    │
      │  ...lặp lại...   │                   │                    │                    │
      │                  │                   │                    │                    │
      │  Nộp bài         │                   │                    │                    │
      │─────────────────►│                   │                    │                    │
      │                  │                   │                    │                    │
      │                  │ submitQuiz()      │                    │                    │
      │                  │──────────────────►│                    │                    │
      │                  │                   │                    │                    │
      │                  │                   │ POST /quizzes/     │                    │
      │                  │                   │      :id/submit    │                    │
      │                  │                   │───────────────────►│                    │
      │                  │                   │                    │                    │
      │                  │                   │                    │ save progress      │
      │                  │                   │                    │───────────────────►│
      │                  │                   │                    │                    │
      │                  │                   │                    │    saved           │
      │                  │                   │                    │◄───────────────────│
      │                  │                   │                    │                    │
      │                  │                   │   score result     │                    │
      │                  │                   │◄───────────────────│                    │
      │                  │                   │                    │                    │
      │                  │ Hiện ResultScreen │                    │                    │
      │                  │◄──────────────────│                    │                    │
      │                  │                   │                    │                    │
      │  Hiển thị điểm   │                   │                    │                    │
      │  + đáp án đúng   │                   │                    │                    │
      │◄─────────────────│                   │                    │                    │
      │                  │                   │                    │                    │
```

---

## 2.6.6 Biểu đồ tuần tự chức năng Theo dõi tiến độ

```
┌───────────┐     ┌───────────────┐     ┌────────────────┐     ┌──────────────┐     ┌──────────────┐
│ Người dùng│     │ProgressScreen │     │ProgressViewModel│    │  ProfileAPI  │     │   MongoDB    │
└─────┬─────┘     └───────┬───────┘     └───────┬────────┘     └──────┬───────┘     └──────┬───────┘
      │                   │                     │                     │                    │
      │  Mở Progress tab  │                     │                     │                    │
      │──────────────────►│                     │                     │                    │
      │                   │                     │                     │                    │
      │                   │ loadProgress()      │                     │                    │
      │                   │────────────────────►│                     │                    │
      │                   │                     │                     │                    │
      │                   │                     │ GET /auth/profile   │                    │
      │                   │                     │────────────────────►│                    │
      │                   │                     │                     │                    │
      │                   │                     │                     │ findById(userId)   │
      │                   │                     │                     │───────────────────►│
      │                   │                     │                     │                    │
      │                   │                     │                     │    user data       │
      │                   │                     │                     │◄───────────────────│
      │                   │                     │                     │                    │
      │                   │                     │   user stats        │                    │
      │                   │                     │◄────────────────────│                    │
      │                   │                     │                     │                    │
      │                   │                     │ GET /quizzes/       │                    │
      │                   │                     │     history         │                    │
      │                   │                     │────────────────────►│                    │
      │                   │                     │                     │                    │
      │                   │                     │                     │ aggregate(userId)  │
      │                   │                     │                     │───────────────────►│
      │                   │                     │                     │                    │
      │                   │                     │                     │    history         │
      │                   │                     │                     │◄───────────────────│
      │                   │                     │                     │                    │
      │                   │                     │   quiz history      │                    │
      │                   │                     │◄────────────────────│                    │
      │                   │                     │                     │                    │
      │                   │   progressData      │                     │                    │
      │                   │◄────────────────────│                     │                    │
      │                   │                     │                     │                    │
      │  Hiển thị:        │                     │                     │                    │
      │  - Level hiện tại │                     │                     │                    │
      │  - Tổng điểm      │                     │                     │                    │
      │  - Số quiz hoàn   │                     │                     │                    │
      │    thành          │                     │                     │                    │
      │  - Biểu đồ        │                     │                     │                    │
      │◄──────────────────│                     │                     │                    │
      │                   │                     │                     │                    │
```

---

## 2.6.7 Biểu đồ tuần tự chức năng Thiết lập hồ sơ

```
┌───────────┐     ┌───────────────────┐     ┌───────────────────┐     ┌──────────────┐     ┌──────────────┐
│ Người dùng│     │EditProfileScreen  │     │ProfileViewModel   │     │  ProfileAPI  │     │   MongoDB    │
└─────┬─────┘     └─────────┬─────────┘     └─────────┬─────────┘     └──────┬───────┘     └──────┬───────┘
      │                     │                         │                      │                    │
      │  Mở Edit Profile    │                         │                      │                    │
      │────────────────────►│                         │                      │                    │
      │                     │                         │                      │                    │
      │                     │ loadProfile()           │                      │                    │
      │                     │────────────────────────►│                      │                    │
      │                     │                         │                      │                    │
      │                     │                         │ GET /auth/profile    │                    │
      │                     │                         │─────────────────────►│                    │
      │                     │                         │                      │                    │
      │                     │                         │                      │ findById(userId)   │
      │                     │                         │                      │───────────────────►│
      │                     │                         │                      │                    │
      │                     │                         │                      │    user data       │
      │                     │                         │                      │◄───────────────────│
      │                     │                         │                      │                    │
      │                     │                         │   profile data       │                    │
      │                     │                         │◄─────────────────────│                    │
      │                     │                         │                      │                    │
      │                     │   profileData           │                      │                    │
      │                     │◄────────────────────────│                      │                    │
      │                     │                         │                      │                    │
      │  Hiển thị form      │                         │                      │                    │
      │◄────────────────────│                         │                      │                    │
      │                     │                         │                      │                    │
      │  Chỉnh sửa thông tin│                         │                      │                    │
      │────────────────────►│                         │                      │                    │
      │                     │                         │                      │                    │
      │                     │ validate data           │                      │                    │
      │                     │───────────┐             │                      │                    │
      │                     │           │             │                      │                    │
      │                     │◄──────────┘             │                      │                    │
      │                     │                         │                      │                    │
      │  Nhấn Save          │                         │                      │                    │
      │────────────────────►│                         │                      │                    │
      │                     │                         │                      │                    │
      │                     │ saveProfile(data)       │                      │                    │
      │                     │────────────────────────►│                      │                    │
      │                     │                         │                      │                    │
      │                     │                         │ PUT /auth/profile    │                    │
      │                     │                         │─────────────────────►│                    │
      │                     │                         │                      │                    │
      │                     │                         │                      │ updateOne(userId)  │
      │                     │                         │                      │───────────────────►│
      │                     │                         │                      │                    │
      │                     │                         │                      │    updated         │
      │                     │                         │                      │◄───────────────────│
      │                     │                         │                      │                    │
      │                     │                         │   200 Success        │                    │
      │                     │                         │◄─────────────────────│                    │
      │                     │                         │                      │                    │
      │                     │   update success        │                      │                    │
      │                     │◄────────────────────────│                      │                    │
      │                     │                         │                      │                    │
      │  Thông báo thành    │                         │                      │                    │
      │  công               │                         │                      │                    │
      │◄────────────────────│                         │                      │                    │
      │                     │                         │                      │                    │
```

---

## 2.6.8 Biểu đồ tuần tự chức năng Thêm từ vựng (Admin)

```
┌───────────┐     ┌───────────────────┐     ┌──────────────┐     ┌──────────────┐
│   Admin   │     │ Admin Dashboard   │     │  Admin API   │     │   MongoDB    │
└─────┬─────┘     └─────────┬─────────┘     └──────┬───────┘     └──────┬───────┘
      │                     │                      │                    │
      │  Mở Vocabulary tab  │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Click "Thêm mới"   │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Hiện modal form    │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
      │  Nhập thông tin:    │                      │                    │
      │  - Japanese         │                      │                    │
      │  - Reading          │                      │                    │
      │  - Meaning          │                      │                    │
      │  - Level, Topic     │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Click "Lưu"        │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ POST /admin/         │                    │
      │                     │      vocabularies    │                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ validate data      │
      │                     │                      │─────────┐          │
      │                     │                      │         │          │
      │                     │                      │◄────────┘          │
      │                     │                      │                    │
      │                     │                      │ create(vocabData)  │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    created         │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  201 Created         │                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Đóng modal +       │                      │                    │
      │  refresh table      │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
```

---

## 2.6.9 Biểu đồ tuần tự chức năng Xóa từ vựng (Admin)

```
┌───────────┐     ┌───────────────────┐     ┌──────────────┐     ┌──────────────┐
│   Admin   │     │ Admin Dashboard   │     │  Admin API   │     │   MongoDB    │
└─────┬─────┘     └─────────┬─────────┘     └──────┬───────┘     └──────┬───────┘
      │                     │                      │                    │
      │  Click nút "Xóa"    │                      │                    │
      │  trên row từ vựng   │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Hiện confirm       │                      │                    │
      │  dialog             │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
      │  Xác nhận xóa       │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ DELETE /admin/       │                    │
      │                     │       vocabularies   │                    │
      │                     │       /:id           │                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ deleteOne(id)      │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    deleted         │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  200 Success         │                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Refresh table      │                      │                    │
      │  + thông báo        │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
```

---

## 2.6.10 Biểu đồ tuần tự chức năng Xem danh sách từ vựng (Admin)

```
┌───────────┐     ┌───────────────────┐     ┌──────────────┐     ┌──────────────┐
│   Admin   │     │ Admin Dashboard   │     │  Admin API   │     │   MongoDB    │
└─────┬─────┘     └─────────┬─────────┘     └──────┬───────┘     └──────┬───────┘
      │                     │                      │                    │
      │  Mở Vocabulary tab  │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ GET /admin/          │                    │
      │                     │     vocabularies     │                    │
      │                     │     ?page=1&limit=10 │                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ find().skip().     │
      │                     │                      │       limit()      │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    vocab list      │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │                      │ countDocuments()   │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    total count     │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  { data, pagination }│                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Hiển thị table     │                      │                    │
      │  với pagination     │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
      │  Chọn filter        │                      │                    │
      │  (level/topic)      │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ GET /admin/          │                    │
      │                     │     vocabularies     │                    │
      │                     │     ?level=N5        │                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ find({level: 'N5'})│
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    filtered list   │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  filtered data       │                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Cập nhật table     │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
```

---

## 2.6.11 Biểu đồ tuần tự chức năng Thêm câu hỏi (Admin)

```
┌───────────┐     ┌───────────────────┐     ┌──────────────┐     ┌──────────────┐
│   Admin   │     │ Admin Dashboard   │     │  Admin API   │     │   MongoDB    │
└─────┬─────┘     └─────────┬─────────┘     └──────┬───────┘     └──────┬───────┘
      │                     │                      │                    │
      │  Mở Quiz tab        │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Chọn Quiz Set      │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Click "Thêm câu    │                      │                    │
      │  hỏi"               │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Hiện modal form    │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
      │  Nhập thông tin:    │                      │                    │
      │  - Question         │                      │                    │
      │  - Options A,B,C,D  │                      │                    │
      │  - Correct answer   │                      │                    │
      │  - Explanation      │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Click "Lưu"        │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ POST /admin/         │                    │
      │                     │      quizzes/:id/    │                    │
      │                     │      questions       │                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ validate question  │
      │                     │                      │─────────┐          │
      │                     │                      │         │          │
      │                     │                      │◄────────┘          │
      │                     │                      │                    │
      │                     │                      │ updateOne(         │
      │                     │                      │   {$push:questions}│
      │                     │                      │ )                  │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    updated         │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  201 Created         │                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Đóng modal +       │                      │                    │
      │  refresh questions  │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
```

---

## 2.6.12 Biểu đồ tuần tự chức năng Xóa câu hỏi (Admin)

```
┌───────────┐     ┌───────────────────┐     ┌──────────────┐     ┌──────────────┐
│   Admin   │     │ Admin Dashboard   │     │  Admin API   │     │   MongoDB    │
└─────┬─────┘     └─────────┬─────────┘     └──────┬───────┘     └──────┬───────┘
      │                     │                      │                    │
      │  Click nút "Xóa"    │                      │                    │
      │  trên row câu hỏi   │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Hiện confirm       │                      │                    │
      │  dialog             │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
      │  Xác nhận xóa       │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ DELETE /admin/       │                    │
      │                     │        quizzes/:id/  │                    │
      │                     │        questions/:qId│                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ updateOne(         │
      │                     │                      │   {$pull:questions}│
      │                     │                      │ )                  │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    updated         │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  200 Success         │                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Refresh questions  │                      │                    │
      │  + thông báo        │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
```

---

## 2.6.13 Biểu đồ tuần tự chức năng Xem danh sách câu hỏi (Admin)

```
┌───────────┐     ┌───────────────────┐     ┌──────────────┐     ┌──────────────┐
│   Admin   │     │ Admin Dashboard   │     │  Admin API   │     │   MongoDB    │
└─────┬─────┘     └─────────┬─────────┘     └──────┬───────┘     └──────┬───────┘
      │                     │                      │                    │
      │  Mở Quiz tab        │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ GET /admin/quizzes   │                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ find()             │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    quiz sets       │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  quiz set list       │                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Hiển thị quiz sets │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
      │  Click "Xem" quiz   │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ GET /admin/          │                    │
      │                     │     quizzes/:id      │                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ findById(id)       │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    quiz with       │
      │                     │                      │    questions       │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  { quiz, questions } │                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Hiển thị modal     │                      │                    │
      │  với danh sách      │                      │                    │
      │  câu hỏi            │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
```

---

## 2.6.14 Biểu đồ tuần tự chức năng Xóa người dùng (Admin)

```
┌───────────┐     ┌───────────────────┐     ┌──────────────┐     ┌──────────────┐
│   Admin   │     │ Admin Dashboard   │     │  Admin API   │     │   MongoDB    │
└─────┬─────┘     └─────────┬─────────┘     └──────┬───────┘     └──────┬───────┘
      │                     │                      │                    │
      │  Mở Users tab       │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Click nút "Xóa"    │                      │                    │
      │  trên row user      │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │  Hiện confirm       │                      │                    │
      │  dialog             │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
      │  Xác nhận xóa       │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ DELETE /admin/       │                    │
      │                     │        users/:id     │                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ check permissions  │
      │                     │                      │─────────┐          │
      │                     │                      │         │          │
      │                     │                      │◄────────┘          │
      │                     │                      │                    │
      │                     │                      │ deleteOne(id)      │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    deleted         │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │                      │ delete progress    │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    deleted         │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  200 Success         │                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Refresh table      │                      │                    │
      │  + thông báo        │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
```

---

## 2.6.15 Biểu đồ tuần tự chức năng Xem thông tin người dùng (Admin)

```
┌───────────┐     ┌───────────────────┐     ┌──────────────┐     ┌──────────────┐
│   Admin   │     │ Admin Dashboard   │     │  Admin API   │     │   MongoDB    │
└─────┬─────┘     └─────────┬─────────┘     └──────┬───────┘     └──────┬───────┘
      │                     │                      │                    │
      │  Mở Users tab       │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ GET /admin/users     │                    │
      │                     │     ?page=1&limit=10 │                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ find().select()    │
      │                     │                      │   .skip().limit()  │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    user list       │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  { users, pagination}│                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Hiển thị danh      │                      │                    │
      │  sách users         │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
      │  Click row để       │                      │                    │
      │  xem chi tiết       │                      │                    │
      │────────────────────►│                      │                    │
      │                     │                      │                    │
      │                     │ GET /admin/          │                    │
      │                     │     users/:id        │                    │
      │                     │─────────────────────►│                    │
      │                     │                      │                    │
      │                     │                      │ findById(id)       │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    user detail     │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │                      │ get user progress  │
      │                     │                      │───────────────────►│
      │                     │                      │                    │
      │                     │                      │    progress data   │
      │                     │                      │◄───────────────────│
      │                     │                      │                    │
      │                     │  { user, progress }  │                    │
      │                     │◄─────────────────────│                    │
      │                     │                      │                    │
      │  Hiển thị modal     │                      │                    │
      │  chi tiết:          │                      │                    │
      │  - Thông tin user   │                      │                    │
      │  - Level, Points    │                      │                    │
      │  - Quiz history     │                      │                    │
      │  - Ngày tạo         │                      │                    │
      │◄────────────────────│                      │                    │
      │                     │                      │                    │
```

---

*Các biểu đồ tuần tự trên mô tả chi tiết luồng xử lý của từng chức năng trong hệ thống Sakura Flashcard*
